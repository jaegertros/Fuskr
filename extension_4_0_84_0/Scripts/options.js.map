{"version":3,"sources":["../../Scripts/options.js"],"names":[],"mappings":"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","file":"options.js","sourcesContent":["/* globals document, chrome, clearTimeout, setTimeout */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var timeoutId = null,\r\n        options = {\r\n            history: [],\r\n            darkMode: false,\r\n            keepRecentFusks: true,\r\n            openInForeground: true\r\n        };\r\n\r\n    function setCheckboxes() {\r\n        var darkMode = document.getElementById('darkMode');\r\n        var keepRecentFusks = document.getElementById('keepRecentFusks');\r\n        var openInForeground = document.getElementById('openInForeground');\r\n\r\n        if (darkMode && keepRecentFusks && openInForeground) {\r\n            darkMode.checked = options.darkMode;\r\n            keepRecentFusks.checked = options.keepRecentFusks;\r\n            openInForeground.checked = options.openInForeground;\r\n        }\r\n    }\r\n\r\n    function saveOptions() {\r\n        var darkMode = document.getElementById('darkMode');\r\n        var keepRecentFusks = document.getElementById('keepRecentFusks');\r\n        var openInForeground = document.getElementById('openInForeground');\r\n        var status = document.getElementById('status');\r\n\r\n        var optionsToSet = {\r\n            darkMode: darkMode.checked,\r\n            keepRecentFusks: keepRecentFusks.checked,\r\n            openInForeground: openInForeground.checked\r\n        };\r\n\r\n        // If disabling recent fusks, clear history\r\n        if (!keepRecentFusks.checked) {\r\n            optionsToSet.history = [];\r\n        }\r\n\r\n        chrome.storage.sync.set(optionsToSet, function () {\r\n            if (chrome.runtime.lastError) {\r\n                status.innerHTML = 'Could not save settings. Try again.';\r\n            } else {\r\n                status.innerHTML = 'Options saved!';\r\n                clearTimeout(timeoutId);\r\n                timeoutId = setTimeout(function () {\r\n                    status.innerHTML = '';\r\n                }, 2000);\r\n            }\r\n        });\r\n    }\r\n\r\n    (function () {\r\n        document.addEventListener('DOMContentLoaded', setCheckboxes);\r\n        document.getElementById('save').addEventListener('click', saveOptions);\r\n\r\n        var storagePromise = new Promise(function (resolve) {\r\n            chrome.storage.sync.get(null, function (items) {\r\n                if (typeof items === 'undefined') {\r\n                    //We cannot get or set options.\r\n                    return;\r\n                }\r\n                resolve(items);\r\n            });\r\n        });\r\n\r\n        storagePromise.then(function(items) {\r\n            Object.keys(items).map(function (key) {\r\n                options[key] = items[key];\r\n            });\r\n\r\n            setCheckboxes();\r\n        });\r\n    }());\r\n\r\n    chrome.storage.onChanged.addListener(function (changes) {\r\n        if (changes === null || typeof changes === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        Object.keys(changes).map(function (key) {\r\n            options[key] = changes[key].newValue;\r\n        });\r\n\r\n        setCheckboxes();\r\n    });\r\n}());\r\n"]}